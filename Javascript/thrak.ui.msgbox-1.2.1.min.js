(function($,me){var unique_id=1;$.alert=function(msg,title,callback,options){__show_alert("alert",arguments);}
$.error=function(msg,title,callback,options){__show_alert("error",arguments);}
$.confirm=function(msg,title,callback,options){__show_alert("confirm",arguments);}
$.msgbox=function(msg,title,flags,callback,options){__show_alert("msgbox",arguments);}
$.inputbox=function(msg,title,callback,options,field_definition){__show_alert("inputbox",arguments);}
$.msgbox.MB_OK=0x00000000;$.msgbox.MB_OKCANCEL=0x00000001;$.msgbox.MB_ABORTRETRYIGNORE=0x00000002;$.msgbox.MB_YESNOCANCEL=0x00000003;$.msgbox.MB_YESNO=0x00000004;$.msgbox.MB_RETRYCANCEL=0x00000005;$.msgbox.MB_CANCELTRYCONTINUE=0x00000006;var BUTTON_MASK=0x0000000F;var BUTTON_SHIFT=0;$.msgbox.MB_ICONEXCLAMATION=0x00000080;$.msgbox.MB_ICONWARNING=0x00000070;$.msgbox.MB_ICONINFORMATION=0x00000060;$.msgbox.MB_ICONASTERISK=0x00000050;$.msgbox.MB_ICONQUESTION=0x00000040;$.msgbox.MB_ICONSTOP=0x00000030;$.msgbox.MB_ICONERROR=0x00000020;$.msgbox.MB_ICONHAND=0x00000010;var ICON_MASK=0x000000F0;var ICON_SHIFT=4;$.msgbox.MB_DEFBUTTON1=0x00000000;$.msgbox.MB_DEFBUTTON2=0x00000100;$.msgbox.MB_DEFBUTTON3=0x00000200;$.msgbox.MB_DEFBUTTON4=0x00000300;var DEFBUTTON_MASK=0x00000F00;var DEFBUTTON_SHIFT=8;$.msgbox.IDABORT=3;$.msgbox.IDCANCEL=2;$.msgbox.IDCONTINUE=11;$.msgbox.IDIGNORE=5;$.msgbox.IDNO=7;$.msgbox.IDOK=1;$.msgbox.IDRETRY=4;$.msgbox.IDTRYAGAIN=10;$.msgbox.IDYES=6;var message="<span style='color: #FF0000'>The developer forgot to specify a message for this alert...</span>";var default_labels={boxTitles:{alert:"Message",error:"Error",confirm:"Confirmation",msgbox:"Message",inputbox:"Input value"},buttonLabels:{'ok':"Ok",'cancel':"Cancel",'abort':"Abort",'retry':"Retry",'ignore':"Ignore",'continue':"Continue",'try':"Try again",'help':"Help",'yes':"Yes",'no':"No"}};var default_options={modal:true,width:"auto",closeOnEscape:true,height:"auto",maxWidth:800,resizable:false,stack:true,open:function(){var $this=$(this);var defbutton=$this.dialog('option','defaultButton');var width=$this.width();var maxwidth=$this.dialog('option','maxWidth');if(defbutton!=undefined)
$('.ui-dialog-buttonpane button:eq('+defbutton+')',$this.parent()).focus();if(width>maxwidth){$this.css('max-width',maxwidth+'px').css('overflow','hidden').dialog('option','position',$this.dialog('option','position'));}}};function __close_me($this,user_callback,status){if(status===true&&$this.dialog('option','dialogType')=='inputbox'){var $items;$items=$('input',$this);if($items.length>0)
status=$items.val();$items=$('textarea',$this);if($items.length>0)
status=$items.val();}
user_callback&&user_callback(status,$this);$this.dialog('destroy');$this.remove();}
function __show_alert(boxtype,args){var $this=$(this);boxtype=boxtype.toLowerCase();var labels=default_labels;if($.locale)
labels=$.extend(labels,$.locale().options.msgbox);var dialog_options=$.extend(default_options,{title:labels.boxTitles[boxtype]});var user_callback;var idok=true,idcancel=false;var got_message=false,got_title=false;var message,field_definition='<input type="text" size="50"/>';var msgbox_flags=0;var icon=undefined;for(var i=0;i<args.length;i++){var argument=args[i];var argtype=typeof(argument);argtype=argtype.toLowerCase();switch(argtype){case 'boolean':argument=argument.toString();argtype='string';break;case 'number':if(boxtype!='msgbox'){argument=argument.toString();argtype='string';}
break;case 'string':if(argument.indexOf('<input')>=0||argument.indexOf('<textarea')>=0)
argtype='html';}
switch(argtype){case 'string':if(got_message){dialog_options.title=argument;got_title=true;}
else{message=argument;got_message=true;}
break;case 'html':field_definition=argument;break;case 'function':user_callback=argument;break;case 'object':dialog_options=$.extend(dialog_options,argument);break;case 'number':msgbox_flags=argument;break;default:throw("Unexpected argument of type '"+argtype+"'");}}
dialog_options.dialogType=boxtype;switch(boxtype){case "confirm":dialog_options.buttons=[{html:labels.buttonLabels['ok'],click:function(e){__close_me($this,user_callback,true);}},{html:labels.buttonLabels['cancel'],click:function(e){__close_me($this,user_callback,false);}}];break;case "error":dialog_options.buttons=[{html:labels.buttonLabels['ok'],click:function(e){__close_me($this,user_callback,true);}}];break;case "inputbox":dialog_options.buttons=[{html:labels.buttonLabels['ok'],click:function(e){__close_me($this,user_callback,true);}},{html:labels.buttonLabels['cancel'],click:function(e){__close_me($this,user_callback,false);}}];break;case "msgbox":{var button_flag=(msgbox_flags& BUTTON_MASK)>>BUTTON_SHIFT,icon_flag=(msgbox_flags& ICON_MASK),defbutton_flag=(msgbox_flags& DEFBUTTON_MASK)>>DEFBUTTON_SHIFT;switch(button_flag){case $.msgbox.MB_OKCANCEL:dialog_options.buttons=[{html:labels.buttonLabels['ok'],click:function(e){__close_me($this,user_callback,$.msgbox.IDOK);}},{html:labels.buttonLabels['cancel'],click:function(e){__close_me($this,user_callback,$.msgbox.IDCANCEL);}}];idok=$.msgbox.IDOK;idcancel=$.msgbox.IDCANCEL;break;case $.msgbox.MB_YESNO:dialog_options.buttons=[{html:labels.buttonLabels['yes'],click:function(e){__close_me($this,user_callback,$.msgbox.IDYES);}},{html:labels.buttonLabels['no'],click:function(e){__close_me($this,user_callback,$.msgbox.IDNO);}}];idok=$.msgbox.IDYES;idcancel=$.msgbox.IDNO;break;case $.msgbox.MB_YESNOCANCEL:dialog_options.buttons=[{html:labels.buttonLabels['yes'],click:function(e){__close_me($this,user_callback,$.msgbox.IDYES);}},{html:labels.buttonLabels['no'],click:function(e){__close_me($this,user_callback,$.msgbox.IDNO);}},{html:labels.buttonLabels['cancel'],click:function(e){__close_me($this,user_callback,$.msgbox.IDCANCEL);}}];idok=$.msgbox.IDYES;idcancel=$.msgbox.IDCANCEL;break;case $.msgbox.MB_RETRYCANCEL:dialog_options.buttons=[{html:labels.buttonLabels['retry'],click:function(e){__close_me($this,user_callback,$.msgbox.IDRETRY);}},{html:labels.buttonLabels['cancel'],click:function(e){__close_me($this,user_callback,$.msgbox.IDNCANCEL);}}];idok=$.msgbox.IDRETRY;idcancel=$.msgbox.IDCANCEL;break;case $.msgbox.MB_ABORTRETRYIGNORE:dialog_options.buttons=[{html:labels.buttonLabels['abort'],click:function(e){__close_me($this,user_callback,$.msgbox.IDABORT);}},{html:labels.buttonLabels['retry'],click:function(e){__close_me($this,user_callback,$.msgbox.IDRETRY);}},{html:labels.buttonLabels['ignore'],click:function(e){__close_me($this,user_callback,$.msgbox.IDIGNORE);}}];idok=$.msgbox.IDABORT;idcancel=$.msgbox.IDIGNORE;break;case $.msgbox.MB_CANCELTRYCONTINUE:dialog_options.buttons=[{html:labels.buttonLabels['cancel'],click:function(e){__close_me($this,user_callback,$.msgbox.IDCANCEL);}},{html:labels.buttonLabels['try'],click:function(e){__close_me($this,user_callback,$.msgbox.IDTRY);}},{html:labels.buttonLabels['continue'],click:function(e){__close_me($this,user_callback,$.msgbox.IDCONTINUE);}}];idok=$.msgbox.IDTRY;idcancel=$.msgbox.IDCANCEL;break;case $.msgbox.MB_OK:default:dialog_options.buttons=[{html:labels.buttonLabels['ok'],click:function(e){__close_me($this,user_callback,$.msgbox.IDOK);}}];idok=$.msgbox.IDOK;idcancel=$.msgbox.IDOK;break;}
if(defbutton_flag>dialog_options.buttons.length)
defbutton_flag=dialog_options.buttons.length;dialog_options.defaultButton=defbutton_flag;switch(icon_flag){case $.msgbox.MB_ICONEXCLAMATION:icon='MB_ICONEXCLAMATION';break;case $.msgbox.MB_ICONWARNING:icon='MB_ICONWARNING';break;case $.msgbox.MB_ICONINFORMATION:icon='MB_ICONINFORMATION';break;case $.msgbox.MB_ICONASTERISK:icon='MB_ICONASTERISK';break;case $.msgbox.MB_ICONQUESTION:icon='MB_ICONQUESTION';break;case $.msgbox.MB_ICONSTOP:icon='MB_ICONSTOP';break;case $.msgbox.MB_ICONERROR:icon='MB_ICONERROR';break;case $.msgbox.MB_ICONHAND:icon='MB_ICONHAND';break;}
if(icon!==undefined)
icon=me.dirname+'/images/'+icon+'.png';break;}
case "alert":default:dialog_options.buttons=[{html:labels.buttonLabels['ok'],click:function(e){__close_me($this,user_callback,true);}}];}
var input_field='';if(boxtype=='inputbox'){input_field='<div class="'+'ui-popup-dialog-input ui-'+boxtype+'-dialog-input">'+field_definition+'</div>';}
var wrapper_start='',wrapper_end='';if(icon!==undefined){wrapper_start='<table width="100%" cellpadding="0" cellspacing="0">'+'<tr>'+'	<td class="ui-popup-dialog-icon-cell ui-'+boxtype+'-dialog-icon-cell">'+'		<div class="ui-popup-dialog-icon ui-'+boxtype+'-dialog-icon">'+'			<img src="'+icon+'"/>'+'		</div>'+'	</td>'+'	<td class="ui-popup-dialog-message-cell ui-'+boxtype+'-dialog-message-cell">';wrapper_end='</td></tr></table>';}
message=wrapper_start+'<div class="'+'ui-popup-dialog-message ui-'+boxtype+'-dialog-message">'+message+'</div>'+input_field+wrapper_end;var dialog_id="msgbox-alert-"+unique_id++;var dialog_selector='#'+dialog_id;$('body').append("<div id='"+dialog_id+"' style='display: none'>"+message+"</div>");var $this=$(dialog_selector);$this.dialog(dialog_options);var $parent=$this.parent();$this.addClass('ui-popup-dialog-message ui-'+boxtype+'-dialog-message');$('.ui-button',$parent).addClass('ui-popup-dialog-button ui-'+boxtype+'-dialog-button');$('.ui-dialog-titlebar',$parent).addClass('ui-popup-dialog-titlebar ui-'+boxtype+'-dialog-titlebar');$('.ui-dialog-title',$parent).addClass('ui-popup-dialog-title ui-'+boxtype+'-dialog-title');$('.ui-button-icon-only',$parent).addClass('ui-popup-button-icon-only ui-'+boxtype+'-button-icon-only');$('.ui-dialog-buttonset',$parent).addClass('ui-popup-dialog-buttonset ui-'+boxtype+'-dialog-buttonset');$('.ui-button-text',$parent).addClass('ui-popup-dialog-button-text ui-'+boxtype+'-dialog-button-text');$(".ui-dialog-titlebar-close",$parent).click(function(e){$this.killEvent(e);__close_me($this,user_callback,false);return(true);});$parent.keydown(function(e){if(e.keyCode===$.ui.keyCode.ESCAPE){$this.killEvent(e);__close_me($this,user_callback,idcancel);return(true);}});$parent.keypress(function(e){if(e.keyCode===$.ui.keyCode.ENTER){$this.killEvent(e);__close_me($this,user_callback,idok);return(true);}});$('textarea',$parent).keypress(function(e){var $this=$(this);if(e.keyCode===$.ui.keyCode.ENTER){$this.killEvent(e);$this.val($this.val()+"\n");return(false);}});$('textarea',$parent).keyup(function(e){var $this=$(this);if(e.keyCode===$.ui.keyCode.TAB&&e.ctrlKey){$this.killEvent(e);$this.val($this.val()+"\t");return(false);}});$this.dialog('open');}
var waitDialogId='ui-wait-dialog';var $waitDialog=undefined;$.wait=function(){if(arguments.length==0){if($waitDialog!==undefined){$waitDialog.dialog('destroy');$waitDialog.remove();$waitDialog=undefined;}
return;}
var options;if(typeof(arguments[0])==='string')
options={message:arguments[0],icon:undefined};else if(typeof(arguments[0])=='object')
options=$.extend({},options);else options={message:undefined,icon:undefined};var dialog_def='<div id="'+waitDialogId+'" class="ui-wait-dialog">'+'<div class="ui-wait-dialog-message"></div>'+'<div class="ui-wait-dialog-icon"><div></div></div>'+'</div>';$('body').append(dialog_def);var $this=$('#'+waitDialogId);if(options.message===undefined)
$('.ui-wait-dialog-message',$this).addClass('ui-wait-dialog-message-default');else $('.ui-wait-dialog-message',$this).html(options.message);if(options.icon===undefined)
$('.ui-wait-dialog-icon',$this).addClass('ui-wait-dialog-icon-default');else $('.ui-wait-dialog-icon',$this).html('<img src="'+options.icon+'"/>');var dialog_options={modal:true,autoOpen:false,width:"auto",height:"auto",closeOnEscape:false,resizable:false,stack:true,open:function(){$(this).siblings('div.ui-dialog-titlebar').remove();$('.ui-widget-overlay').css('opacity','0.50');}}
$this.dialog(dialog_options).dialog('open');$waitDialog=$this;}})(jQuery,$.script());